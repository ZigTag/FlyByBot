import { CommandDefinition } from '../../lib/command';
import { CommandCategory } from '../../constants';
import { makeEmbed } from '../../lib/embed';
import { database } from '../../handlers/mysqldb'
import moment from 'moment';

export const birthday: CommandDefinition = {
    name: 'birthday add',
    description: 'Initiates the birthday command to add a birthday',
    category: CommandCategory.GENERAL,
    executor: async (msg) => {

            setTimeout(async () => {
                await database.utils.dbcheck(con)
                await database.utils.init(con, client, 'MM-DD', '832721829822857296', ['879012702222168064'], 'Happy Borisday', 'Happy Birthday', '#ffffff')
            }, 3000)
        }

                const removeEmbed = makeEmbed({
                    title: 'Birthday Added!',
                    description: 'Birthday successfully removed',
                });

                const errorEmbed = makeEmbed({
                    title: 'Uh oh',
                    description: 'Failed to remove birthday',
                });
            
                
                    if(msg) {
                        await msg.channel.send({ embeds: [removeEmbed] }),

                    } else {

                        await msg.channel.send({ embeds: [errorEmbed] });
                    }
                }
             }
    